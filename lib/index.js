var jr=Object.create;var se=Object.defineProperty,Ar=Object.defineProperties,Mr=Object.getOwnPropertyDescriptor,Pr=Object.getOwnPropertyDescriptors,Br=Object.getOwnPropertyNames,ht=Object.getOwnPropertySymbols,Nr=Object.getPrototypeOf,xt=Object.prototype.hasOwnProperty,Tr=Object.prototype.propertyIsEnumerable;var gt=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B=(e,t)=>{for(var r in t||(t={}))xt.call(t,r)&&gt(e,r,t[r]);if(ht)for(var r of ht(t))Tr.call(t,r)&&gt(e,r,t[r]);return e},Be=(e,t)=>Ar(e,Pr(t));var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),yt=(e,t)=>{for(var r in t)se(e,r,{get:t[r],enumerable:!0})},vt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Br(t))!xt.call(e,i)&&i!==r&&se(e,i,{get:()=>t[i],enumerable:!(n=Mr(t,i))||n.enumerable});return e};var N=(e,t,r)=>(r=e!=null?jr(Nr(e)):{},vt(t||!e||!e.__esModule?se(r,"default",{value:e,enumerable:!0}):r,e)),Ur=e=>vt(se({},"__esModule",{value:!0}),e);var It=v((Ii,Ot)=>{var K=1e3,Z=K*60,X=Z*60,V=X*24,Jr=V*7,Kr=V*365.25;Ot.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Zr(e);if(r==="number"&&isFinite(e))return t.long?Qr(e):Xr(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Zr(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Kr;case"weeks":case"week":case"w":return r*Jr;case"days":case"day":case"d":return r*V;case"hours":case"hour":case"hrs":case"hr":case"h":return r*X;case"minutes":case"minute":case"mins":case"min":case"m":return r*Z;case"seconds":case"second":case"secs":case"sec":case"s":return r*K;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Xr(e){var t=Math.abs(e);return t>=V?Math.round(e/V)+"d":t>=X?Math.round(e/X)+"h":t>=Z?Math.round(e/Z)+"m":t>=K?Math.round(e/K)+"s":e+"ms"}function Qr(e){var t=Math.abs(e);return t>=V?he(e,t,V,"day"):t>=X?he(e,t,X,"hour"):t>=Z?he(e,t,Z,"minute"):t>=K?he(e,t,K,"second"):e+" ms"}function he(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var $e=v((qi,qt)=>{function en(e){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=s,r.humanize=It(),r.destroy=d,Object.keys(e).forEach(a=>{r[a]=e[a]}),r.names=[],r.skips=[],r.formatters={};function t(a){let f=0;for(let l=0;l<a.length;l++)f=(f<<5)-f+a.charCodeAt(l),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(a){let f,l=null,g,y;function p(...m){if(!p.enabled)return;let x=p,b=Number(new Date),F=b-(f||b);x.diff=F,x.prev=f,x.curr=b,f=b,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let P=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(ie,W)=>{if(ie==="%%")return"%";P++;let oe=r.formatters[W];if(typeof oe=="function"){let zr=m[P];ie=oe.call(x,zr),m.splice(P,1),P--}return ie}),r.formatArgs.call(x,m),(x.log||r.log).apply(x,m)}return p.namespace=a,p.useColors=r.useColors(),p.color=r.selectColor(a),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(g!==r.namespaces&&(g=r.namespaces,y=r.enabled(a)),y),set:m=>{l=m}}),typeof r.init=="function"&&r.init(p),p}function n(a,f){let l=r(this.namespace+(typeof f>"u"?":":f)+a);return l.log=this.log,l}function i(a){r.save(a),r.namespaces=a,r.names=[],r.skips=[];let f,l=(typeof a=="string"?a:"").split(/[\s,]+/),g=l.length;for(f=0;f<g;f++)!l[f]||(a=l[f].replace(/\*/g,".*?"),a[0]==="-"?r.skips.push(new RegExp("^"+a.slice(1)+"$")):r.names.push(new RegExp("^"+a+"$")))}function o(){let a=[...r.names.map(c),...r.skips.map(c).map(f=>"-"+f)].join(",");return r.enable(""),a}function s(a){if(a[a.length-1]==="*")return!0;let f,l;for(f=0,l=r.skips.length;f<l;f++)if(r.skips[f].test(a))return!1;for(f=0,l=r.names.length;f<l;f++)if(r.names[f].test(a))return!0;return!1}function c(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}function u(a){return a instanceof Error?a.stack||a.message:a}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}qt.exports=en});var zt=v((S,ge)=>{S.formatArgs=rn;S.save=nn;S.load=on;S.useColors=tn;S.storage=sn();S.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();S.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function tn(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function rn(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+ge.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}S.log=console.debug||console.log||(()=>{});function nn(e){try{e?S.storage.setItem("debug",e):S.storage.removeItem("debug")}catch{}}function on(){let e;try{e=S.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function sn(){try{return localStorage}catch{}}ge.exports=$e()(S);var{formatters:an}=ge.exports;an.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var At=v((zi,jt)=>{"use strict";jt.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Bt=v((ji,Pt)=>{"use strict";var cn=require("os"),Mt=require("tty"),O=At(),{env:C}=process,T;O("no-color")||O("no-colors")||O("color=false")||O("color=never")?T=0:(O("color")||O("colors")||O("color=true")||O("color=always"))&&(T=1);"FORCE_COLOR"in C&&(C.FORCE_COLOR==="true"?T=1:C.FORCE_COLOR==="false"?T=0:T=C.FORCE_COLOR.length===0?1:Math.min(parseInt(C.FORCE_COLOR,10),3));function He(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function We(e,t){if(T===0)return 0;if(O("color=16m")||O("color=full")||O("color=truecolor"))return 3;if(O("color=256"))return 2;if(e&&!t&&T===void 0)return 0;let r=T||0;if(C.TERM==="dumb")return r;if(process.platform==="win32"){let n=cn.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in C)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in C)||C.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in C)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(C.TEAMCITY_VERSION)?1:0;if(C.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in C){let n=parseInt((C.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(C.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(C.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(C.TERM)||"COLORTERM"in C?1:r}function un(e){let t=We(e,e&&e.isTTY);return He(t)}Pt.exports={supportsColor:un,stdout:He(We(!0,Mt.isatty(1))),stderr:He(We(!0,Mt.isatty(2)))}});var Tt=v((E,ye)=>{var fn=require("tty"),xe=require("util");E.init=xn;E.log=pn;E.formatArgs=ln;E.save=hn;E.load=gn;E.useColors=dn;E.destroy=xe.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");E.colors=[6,2,3,4,5,1];try{let e=Bt();e&&(e.stderr||e).level>=2&&(E.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}E.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function dn(){return"colors"in E.inspectOpts?Boolean(E.inspectOpts.colors):fn.isatty(process.stderr.fd)}function ln(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${t} \x1B[0m`;e[0]=o+e[0].split(`
`).join(`
`+o),e.push(i+"m+"+ye.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=mn()+t+" "+e[0]}function mn(){return E.inspectOpts.hideDate?"":new Date().toISOString()+" "}function pn(...e){return process.stderr.write(xe.format(...e)+`
`)}function hn(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function gn(){return process.env.DEBUG}function xn(e){e.inspectOpts={};let t=Object.keys(E.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=E.inspectOpts[t[r]]}ye.exports=$e()(E);var{formatters:Nt}=ye.exports;Nt.o=function(e){return this.inspectOpts.colors=this.useColors,xe.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Nt.O=function(e){return this.inspectOpts.colors=this.useColors,xe.inspect(e,this.inspectOpts)}});var ke=v((Ai,Ve)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ve.exports=zt():Ve.exports=Tt()});var $t=v((Mi,Dt)=>{Dt.exports=Ut;function Ut(e,t){if(e&&t)return Ut(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(c){o[c]=s[c]}),o}}});var Ye=v((Pi,Ge)=>{var Ht=$t();Ge.exports=Ht(ve);Ge.exports.strict=Ht(Wt);ve.proto=ve(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return ve(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Wt(this)},configurable:!0})});function ve(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Wt(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var Gt=v((Bi,kt)=>{var yn=Ye(),vn=function(){},wn=function(e){return e.setHeader&&typeof e.abort=="function"},bn=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},Vt=function(e,t,r){if(typeof t=="function")return Vt(e,null,t);t||(t={}),r=yn(r||vn);var n=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,s=t.writable||t.writable!==!1&&e.writable,c=!1,u=function(){e.writable||d()},d=function(){s=!1,o||r.call(e)},a=function(){o=!1,s||r.call(e)},f=function(m){r.call(e,m?new Error("exited with error code: "+m):null)},l=function(m){r.call(e,m)},g=function(){process.nextTick(y)},y=function(){if(!c){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(e,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},p=function(){e.req.on("finish",d)};return wn(e)?(e.on("complete",d),e.on("abort",g),e.req?p():e.on("request",p)):s&&!n&&(e.on("end",u),e.on("close",u)),bn(e)&&e.on("exit",f),e.on("end",a),e.on("finish",d),t.error!==!1&&e.on("error",l),e.on("close",g),function(){c=!0,e.removeListener("complete",d),e.removeListener("abort",g),e.removeListener("request",p),e.req&&e.req.removeListener("finish",d),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",d),e.removeListener("exit",f),e.removeListener("end",a),e.removeListener("error",l),e.removeListener("close",g)}};kt.exports=Vt});var Kt=v((Ni,Jt)=>{var Cn=Ye(),En=Gt(),Je=require("fs"),ae=function(){},Fn=/^v?\.0/.test(process.version),we=function(e){return typeof e=="function"},_n=function(e){return!Fn||!Je?!1:(e instanceof(Je.ReadStream||ae)||e instanceof(Je.WriteStream||ae))&&we(e.close)},Rn=function(e){return e.setHeader&&we(e.abort)},Sn=function(e,t,r,n){n=Cn(n);var i=!1;e.on("close",function(){i=!0}),En(e,{readable:t,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,_n(e))return e.close(ae);if(Rn(e))return e.abort();if(we(e.destroy))return e.destroy();n(s||new Error("stream was destroyed"))}}},Yt=function(e){e()},Ln=function(e,t){return e.pipe(t)},On=function(){var e=Array.prototype.slice.call(arguments),t=we(e[e.length-1]||ae)&&e.pop()||ae;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(i,o){var s=o<e.length-1,c=o>0;return Sn(i,s,c,function(u){r||(r=u),u&&n.forEach(Yt),!s&&(n.forEach(Yt),t(r))})});return e.reduce(Ln)};Jt.exports=On});var Xt=v((Ti,Zt)=>{"use strict";var{PassThrough:In}=require("stream");Zt.exports=e=>{e=B({},e);let{array:t}=e,{encoding:r}=e,n=r==="buffer",i=!1;t?i=!(r||n):r=r||"utf8",n&&(r=null);let o=new In({objectMode:i});r&&o.setEncoding(r);let s=0,c=[];return o.on("data",u=>{c.push(u),i?s=c.length:s+=u.length}),o.getBufferedValue=()=>t?c:n?Buffer.concat(c,s):c.join(""),o.getBufferedLength=()=>s,o}});var Qt=v((Ui,Q)=>{"use strict";var{constants:qn}=require("buffer"),zn=Kt(),jn=Xt(),be=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Ce(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t=B({maxBuffer:1/0},t);let{maxBuffer:r}=t,n;return await new Promise((i,o)=>{let s=c=>{c&&n.getBufferedLength()<=qn.MAX_LENGTH&&(c.bufferedData=n.getBufferedValue()),o(c)};n=zn(e,jn(t),c=>{if(c){s(c);return}i()}),n.on("data",()=>{n.getBufferedLength()>r&&s(new be)})}),n.getBufferedValue()}Q.exports=Ce;Q.exports.default=Ce;Q.exports.buffer=(e,t)=>Ce(e,Be(B({},t),{encoding:"buffer"}));Q.exports.array=(e,t)=>Ce(e,Be(B({},t),{array:!0}));Q.exports.MaxBufferError=be});var nr=v((Di,rr)=>{rr.exports=Ee;function Ee(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}Ee.prototype.go=function(e){this.pending<this.max?tr(this,e):this.waiting.push(e)};Ee.prototype.wait=function(e){this.pending===0?e(this.error):this.listeners.push(e)};Ee.prototype.hold=function(){return er(this)};function er(e){e.pending+=1;var t=!1;return r;function r(i){if(t)throw new Error("callback called twice");if(t=!0,e.error=e.error||i,e.pending-=1,e.waiting.length>0&&e.pending<e.max)tr(e,e.waiting.shift());else if(e.pending===0){var o=e.listeners;e.listeners=[],o.forEach(n)}}function n(i){i(e.error)}}function tr(e,t){t(er(e))}});var or=v(ue=>{var ce=require("fs"),Fe=require("util"),Ke=require("stream"),ir=Ke.Readable,Ze=Ke.Writable,An=Ke.PassThrough,Mn=nr(),_e=require("events").EventEmitter;ue.createFromBuffer=Pn;ue.createFromFd=Bn;ue.BufferSlicer=M;ue.FdSlicer=A;Fe.inherits(A,_e);function A(e,t){t=t||{},_e.call(this),this.fd=e,this.pend=new Mn,this.pend.max=1,this.refCount=0,this.autoClose=!!t.autoClose}A.prototype.read=function(e,t,r,n,i){var o=this;o.pend.go(function(s){ce.read(o.fd,e,t,r,n,function(c,u,d){s(),i(c,u,d)})})};A.prototype.write=function(e,t,r,n,i){var o=this;o.pend.go(function(s){ce.write(o.fd,e,t,r,n,function(c,u,d){s(),i(c,u,d)})})};A.prototype.createReadStream=function(e){return new Re(this,e)};A.prototype.createWriteStream=function(e){return new Se(this,e)};A.prototype.ref=function(){this.refCount+=1};A.prototype.unref=function(){var e=this;if(e.refCount-=1,e.refCount>0)return;if(e.refCount<0)throw new Error("invalid unref");e.autoClose&&ce.close(e.fd,t);function t(r){r?e.emit("error",r):e.emit("close")}};Fe.inherits(Re,ir);function Re(e,t){t=t||{},ir.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end,this.pos=this.start,this.destroyed=!1}Re.prototype._read=function(e){var t=this;if(!t.destroyed){var r=Math.min(t._readableState.highWaterMark,e);if(t.endOffset!=null&&(r=Math.min(r,t.endOffset-t.pos)),r<=0){t.destroyed=!0,t.push(null),t.context.unref();return}t.context.pend.go(function(n){if(t.destroyed)return n();var i=new Buffer(r);ce.read(t.context.fd,i,0,r,t.pos,function(o,s){o?t.destroy(o):s===0?(t.destroyed=!0,t.push(null),t.context.unref()):(t.pos+=s,t.push(i.slice(0,s))),n()})})}};Re.prototype.destroy=function(e){this.destroyed||(e=e||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",e),this.context.unref())};Fe.inherits(Se,Ze);function Se(e,t){t=t||{},Ze.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end==null?1/0:+t.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}Se.prototype._write=function(e,t,r){var n=this;if(!n.destroyed){if(n.pos+e.length>n.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",n.destroy(),r(i);return}n.context.pend.go(function(o){if(n.destroyed)return o();ce.write(n.context.fd,e,0,e.length,n.pos,function(s,c){s?(n.destroy(),o(),r(s)):(n.bytesWritten+=c,n.pos+=c,n.emit("progress"),o(),r())})})}};Se.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};Fe.inherits(M,_e);function M(e,t){_e.call(this),t=t||{},this.refCount=0,this.buffer=e,this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}M.prototype.read=function(e,t,r,n,i){var o=n+r,s=o-this.buffer.length,c=s>0?s:r;this.buffer.copy(e,t,n,o),setImmediate(function(){i(null,c)})};M.prototype.write=function(e,t,r,n,i){e.copy(this.buffer,n,t,t+r),setImmediate(function(){i(null,r,e)})};M.prototype.createReadStream=function(e){e=e||{};var t=new An(e);t.destroyed=!1,t.start=e.start||0,t.endOffset=e.end,t.pos=t.endOffset||this.buffer.length;for(var r=this.buffer.slice(t.start,t.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=r.length){n<r.length&&t.write(r.slice(n,r.length));break}t.write(r.slice(n,i)),n=i}return t.end(),t.destroy=function(){t.destroyed=!0},t};M.prototype.createWriteStream=function(e){var t=this;e=e||{};var r=new Ze(e);return r.start=e.start||0,r.endOffset=e.end==null?this.buffer.length:+e.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(n,i,o){if(!r.destroyed){var s=r.pos+n.length;if(s>r.endOffset){var c=new Error("maximum file length exceeded");c.code="ETOOBIG",r.destroyed=!0,o(c);return}n.copy(t.buffer,r.pos,0,n.length),r.bytesWritten+=n.length,r.pos=s,r.emit("progress"),o()}},r.destroy=function(){r.destroyed=!0},r};M.prototype.ref=function(){this.refCount+=1};M.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function Pn(e,t){return new M(e,t)}function Bn(e,t){return new A(e,t)}});var cr=v((Hi,ar)=>{var U=require("buffer").Buffer,Xe=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(Xe=new Int32Array(Xe));function sr(e){if(U.isBuffer(e))return e;var t=typeof U.alloc=="function"&&typeof U.from=="function";if(typeof e=="number")return t?U.alloc(e):new U(e);if(typeof e=="string")return t?U.from(e):new U(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function Nn(e){var t=sr(4);return t.writeInt32BE(e,0),t}function Qe(e,t){e=sr(e),U.isBuffer(t)&&(t=t.readUInt32BE(0));for(var r=~~t^-1,n=0;n<e.length;n++)r=Xe[(r^e[n])&255]^r>>>8;return r^-1}function et(){return Nn(Qe.apply(null,arguments))}et.signed=function(){return Qe.apply(null,arguments)};et.unsigned=function(){return Qe.apply(null,arguments)>>>0};ar.exports=et});var hr=v(j=>{var tt=require("fs"),Tn=require("zlib"),ur=or(),Un=cr(),Ie=require("util"),qe=require("events").EventEmitter,fr=require("stream").Transform,rt=require("stream").PassThrough,Dn=require("stream").Writable;j.open=$n;j.fromFd=dr;j.fromBuffer=Hn;j.fromRandomAccessReader=nt;j.dosDateTimeToDate=mr;j.validateFileName=pr;j.ZipFile=D;j.Entry=fe;j.RandomAccessReader=$;function $n(e,t,r){typeof t=="function"&&(r=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!0),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0),t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),r==null&&(r=Oe),tt.open(e,"r",function(n,i){if(n)return r(n);dr(i,t,function(o,s){o&&tt.close(i,Oe),r(o,s)})})}function dr(e,t,r){typeof t=="function"&&(r=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!1),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0),t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),r==null&&(r=Oe),tt.fstat(e,function(n,i){if(n)return r(n);var o=ur.createFromFd(e,{autoClose:!0});nt(o,i.size,t,r)})}function Hn(e,t,r){typeof t=="function"&&(r=t,t=null),t==null&&(t={}),t.autoClose=!1,t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0),t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1);var n=ur.createFromBuffer(e,{maxChunkSize:65536});nt(n,e.length,t,r)}function nt(e,t,r,n){typeof r=="function"&&(n=r,r=null),r==null&&(r={}),r.autoClose==null&&(r.autoClose=!0),r.lazyEntries==null&&(r.lazyEntries=!1),r.decodeStrings==null&&(r.decodeStrings=!0);var i=!!r.decodeStrings;if(r.validateEntrySizes==null&&(r.validateEntrySizes=!0),r.strictFileNames==null&&(r.strictFileNames=!1),n==null&&(n=Oe),typeof t!="number")throw new Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");e.ref();var o=22,s=65535,c=Math.min(o+s,t),u=z(c),d=t-u.length;ee(e,u,0,c,d,function(a){if(a)return n(a);for(var f=c-o;f>=0;f-=1)if(u.readUInt32LE(f)===101010256){var l=u.slice(f),g=l.readUInt16LE(4);if(g!==0)return n(new Error("multi-disk zip files are not supported: found disk number: "+g));var y=l.readUInt16LE(10),p=l.readUInt32LE(16),m=l.readUInt16LE(20),x=l.length-o;if(m!==x)return n(new Error("invalid comment length. expected: "+x+". found: "+m));var b=i?Le(l,22,l.length,!1):l.slice(22);if(!(y===65535||p===4294967295))return n(null,new D(e,p,t,y,b,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames));var F=z(20),P=d+f-F.length;ee(e,F,0,F.length,P,function(J){if(J)return n(J);if(F.readUInt32LE(0)!==117853008)return n(new Error("invalid zip64 end of central directory locator signature"));var ie=te(F,8),W=z(56);ee(e,W,0,W.length,ie,function(oe){return oe?n(oe):W.readUInt32LE(0)!==101075792?n(new Error("invalid zip64 end of central directory record signature")):(y=te(W,32),p=te(W,48),n(null,new D(e,p,t,y,b,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames)))})});return}n(new Error("end of central directory record signature not found"))})}Ie.inherits(D,qe);function D(e,t,r,n,i,o,s,c,u,d){var a=this;qe.call(a),a.reader=e,a.reader.on("error",function(f){lr(a,f)}),a.reader.once("close",function(){a.emit("close")}),a.readEntryCursor=t,a.fileSize=r,a.entryCount=n,a.comment=i,a.entriesRead=0,a.autoClose=!!o,a.lazyEntries=!!s,a.decodeStrings=!!c,a.validateEntrySizes=!!u,a.strictFileNames=!!d,a.isOpen=!0,a.emittedError=!1,a.lazyEntries||a._readEntry()}D.prototype.close=function(){!this.isOpen||(this.isOpen=!1,this.reader.unref())};function I(e,t){e.autoClose&&e.close(),lr(e,t)}function lr(e,t){e.emittedError||(e.emittedError=!0,e.emit("error",t))}D.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};D.prototype._readEntry=function(){var e=this;if(e.entryCount===e.entriesRead){setImmediate(function(){e.autoClose&&e.close(),!e.emittedError&&e.emit("end")});return}if(!e.emittedError){var t=z(46);ee(e.reader,t,0,t.length,e.readEntryCursor,function(r){if(r)return I(e,r);if(!e.emittedError){var n=new fe,i=t.readUInt32LE(0);if(i!==33639248)return I(e,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=t.readUInt16LE(4),n.versionNeededToExtract=t.readUInt16LE(6),n.generalPurposeBitFlag=t.readUInt16LE(8),n.compressionMethod=t.readUInt16LE(10),n.lastModFileTime=t.readUInt16LE(12),n.lastModFileDate=t.readUInt16LE(14),n.crc32=t.readUInt32LE(16),n.compressedSize=t.readUInt32LE(20),n.uncompressedSize=t.readUInt32LE(24),n.fileNameLength=t.readUInt16LE(28),n.extraFieldLength=t.readUInt16LE(30),n.fileCommentLength=t.readUInt16LE(32),n.internalFileAttributes=t.readUInt16LE(36),n.externalFileAttributes=t.readUInt32LE(38),n.relativeOffsetOfLocalHeader=t.readUInt32LE(42),n.generalPurposeBitFlag&64)return I(e,new Error("strong encryption is not supported"));e.readEntryCursor+=46,t=z(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),ee(e.reader,t,0,t.length,e.readEntryCursor,function(o){if(o)return I(e,o);if(!e.emittedError){var s=(n.generalPurposeBitFlag&2048)!==0;n.fileName=e.decodeStrings?Le(t,0,n.fileNameLength,s):t.slice(0,n.fileNameLength);var c=n.fileNameLength+n.extraFieldLength,u=t.slice(n.fileNameLength,c);n.extraFields=[];for(var d=0;d<u.length-3;){var a=u.readUInt16LE(d+0),f=u.readUInt16LE(d+2),l=d+4,g=l+f;if(g>u.length)return I(e,new Error("extra field length exceeds extra field buffer size"));var y=z(f);u.copy(y,0,l,g),n.extraFields.push({id:a,data:y}),d=g}if(n.fileComment=e.decodeStrings?Le(t,c,c+n.fileCommentLength,s):t.slice(c,c+n.fileCommentLength),n.comment=n.fileComment,e.readEntryCursor+=t.length,e.entriesRead+=1,n.uncompressedSize===4294967295||n.compressedSize===4294967295||n.relativeOffsetOfLocalHeader===4294967295){for(var p=null,d=0;d<n.extraFields.length;d++){var m=n.extraFields[d];if(m.id===1){p=m.data;break}}if(p==null)return I(e,new Error("expected zip64 extended information extra field"));var x=0;if(n.uncompressedSize===4294967295){if(x+8>p.length)return I(e,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=te(p,x),x+=8}if(n.compressedSize===4294967295){if(x+8>p.length)return I(e,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=te(p,x),x+=8}if(n.relativeOffsetOfLocalHeader===4294967295){if(x+8>p.length)return I(e,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=te(p,x),x+=8}}if(e.decodeStrings)for(var d=0;d<n.extraFields.length;d++){var m=n.extraFields[d];if(m.id===28789){if(m.data.length<6||m.data.readUInt8(0)!==1)continue;var b=m.data.readUInt32LE(1);if(Un.unsigned(t.slice(0,n.fileNameLength))!==b)continue;n.fileName=Le(m.data,5,m.data.length,!0);break}}if(e.validateEntrySizes&&n.compressionMethod===0){var F=n.uncompressedSize;if(n.isEncrypted()&&(F+=12),n.compressedSize!==F){var P="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return I(e,new Error(P))}}if(e.decodeStrings){e.strictFileNames||(n.fileName=n.fileName.replace(/\\/g,"/"));var J=pr(n.fileName,e.validateFileNameOptions);if(J!=null)return I(e,new Error(J))}e.emit("entry",n),e.lazyEntries||e._readEntry()}})}})}};D.prototype.openReadStream=function(e,t,r){var n=this,i=0,o=e.compressedSize;if(r==null)r=t,t={};else{if(t.decrypt!=null){if(!e.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(t.decrypt!==!1)throw new Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()&&t.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(t.decompress!=null){if(!e.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(t.decompress===!1||t.decompress===!0))throw new Error("invalid options.decompress value: "+t.decompress)}if(t.start!=null||t.end!=null){if(e.isCompressed()&&t.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(e.isEncrypted()&&t.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(t.start!=null){if(i=t.start,i<0)throw new Error("options.start < 0");if(i>e.compressedSize)throw new Error("options.start > entry.compressedSize")}if(t.end!=null){if(o=t.end,o<0)throw new Error("options.end < 0");if(o>e.compressedSize)throw new Error("options.end > entry.compressedSize");if(o<i)throw new Error("options.end < options.start")}}if(!n.isOpen)return r(new Error("closed"));if(e.isEncrypted()&&t.decrypt!==!1)return r(new Error("entry is encrypted, and options.decrypt !== false"));n.reader.ref();var s=z(30);ee(n.reader,s,0,s.length,e.relativeOffsetOfLocalHeader,function(c){try{if(c)return r(c);var u=s.readUInt32LE(0);if(u!==67324752)return r(new Error("invalid local file header signature: 0x"+u.toString(16)));var d=s.readUInt16LE(26),a=s.readUInt16LE(28),f=e.relativeOffsetOfLocalHeader+s.length+d+a,l;if(e.compressionMethod===0)l=!1;else if(e.compressionMethod===8)l=t.decompress!=null?t.decompress:!0;else return r(new Error("unsupported compression method: "+e.compressionMethod));var g=f,y=g+e.compressedSize;if(e.compressedSize!==0&&y>n.fileSize)return r(new Error("file data overflows file bounds: "+g+" + "+e.compressedSize+" > "+n.fileSize));var p=n.reader.createReadStream({start:g+i,end:g+o}),m=p;if(l){var x=!1,b=Tn.createInflateRaw();p.on("error",function(F){setImmediate(function(){x||b.emit("error",F)})}),p.pipe(b),n.validateEntrySizes?(m=new de(e.uncompressedSize),b.on("error",function(F){setImmediate(function(){x||m.emit("error",F)})}),b.pipe(m)):m=b,m.destroy=function(){x=!0,b!==m&&b.unpipe(m),p.unpipe(b),p.destroy()}}r(null,m)}finally{n.reader.unref()}})};function fe(){}fe.prototype.getLastModDate=function(){return mr(this.lastModFileDate,this.lastModFileTime)};fe.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};fe.prototype.isCompressed=function(){return this.compressionMethod===8};function mr(e,t){var r=e&31,n=(e>>5&15)-1,i=(e>>9&127)+1980,o=0,s=(t&31)*2,c=t>>5&63,u=t>>11&31;return new Date(i,n,r,u,c,s,o)}function pr(e){return e.indexOf("\\")!==-1?"invalid characters in fileName: "+e:/^[a-zA-Z]:/.test(e)||/^\//.test(e)?"absolute path: "+e:e.split("/").indexOf("..")!==-1?"invalid relative path: "+e:null}function ee(e,t,r,n,i,o){if(n===0)return setImmediate(function(){o(null,z(0))});e.read(t,r,n,i,function(s,c){if(s)return o(s);if(c<n)return o(new Error("unexpected EOF"));o()})}Ie.inherits(de,fr);function de(e){fr.call(this),this.actualByteCount=0,this.expectedByteCount=e}de.prototype._transform=function(e,t,r){if(this.actualByteCount+=e.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(n))}r(null,e)};de.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount){var t="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return e(new Error(t))}e()};Ie.inherits($,qe);function $(){qe.call(this),this.refCount=0}$.prototype.ref=function(){this.refCount+=1};$.prototype.unref=function(){var e=this;if(e.refCount-=1,e.refCount>0)return;if(e.refCount<0)throw new Error("invalid unref");e.close(t);function t(r){if(r)return e.emit("error",r);e.emit("close")}};$.prototype.createReadStream=function(e){var t=e.start,r=e.end;if(t===r){var n=new rt;return setImmediate(function(){n.end()}),n}var i=this._readStreamForRange(t,r),o=!1,s=new ze(this);i.on("error",function(u){setImmediate(function(){o||s.emit("error",u)})}),s.destroy=function(){i.unpipe(s),s.unref(),i.destroy()};var c=new de(r-t);return s.on("error",function(u){setImmediate(function(){o||c.emit("error",u)})}),c.destroy=function(){o=!0,s.unpipe(c),s.destroy()},i.pipe(s).pipe(c)};$.prototype._readStreamForRange=function(e,t){throw new Error("not implemented")};$.prototype.read=function(e,t,r,n,i){var o=this.createReadStream({start:n,end:n+r}),s=new Dn,c=0;s._write=function(u,d,a){u.copy(e,t+c,0,u.length),c+=u.length,a()},s.on("finish",i),o.on("error",function(u){i(u)}),o.pipe(s)};$.prototype.close=function(e){setImmediate(e)};Ie.inherits(ze,rt);function ze(e){rt.call(this),this.context=e,this.context.ref(),this.unreffedYet=!1}ze.prototype._flush=function(e){this.unref(),e()};ze.prototype.unref=function(e){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var Wn="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function Le(e,t,r,n){if(n)return e.toString("utf8",t,r);for(var i="",o=t;o<r;o++)i+=Wn[e[o]];return i}function te(e,t){var r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*4294967296+r}var z;typeof Buffer.allocUnsafe=="function"?z=function(e){return Buffer.allocUnsafe(e)}:z=function(e){return new Buffer(e)};function Oe(e){if(e)throw e}});var xr=v((Vi,gr)=>{var q=ke()("extract-zip"),{createWriteStream:Vn,promises:re}=require("fs"),kn=Qt(),k=require("path"),{promisify:ot}=require("util"),Gn=require("stream"),Yn=hr(),Jn=ot(Yn.open),Kn=ot(Gn.pipeline),it=class{constructor(t,r){this.zipPath=t,this.opts=r}async extract(){return q("opening",this.zipPath,"with opts",this.opts),this.zipfile=await Jn(this.zipPath,{lazyEntries:!0}),this.canceled=!1,new Promise((t,r)=>{this.zipfile.on("error",n=>{this.canceled=!0,r(n)}),this.zipfile.readEntry(),this.zipfile.on("close",()=>{this.canceled||(q("zip extraction complete"),t())}),this.zipfile.on("entry",async n=>{if(this.canceled){q("skipping entry",n.fileName,{cancelled:this.canceled});return}if(q("zipfile entry",n.fileName),n.fileName.startsWith("__MACOSX/")){this.zipfile.readEntry();return}let i=k.dirname(k.join(this.opts.dir,n.fileName));try{await re.mkdir(i,{recursive:!0});let o=await re.realpath(i);if(k.relative(this.opts.dir,o).split(k.sep).includes(".."))throw new Error(`Out of bound path "${o}" found while processing file ${n.fileName}`);await this.extractEntry(n),q("finished processing",n.fileName),this.zipfile.readEntry()}catch(o){this.canceled=!0,this.zipfile.close(),r(o)}})})}async extractEntry(t){if(this.canceled){q("skipping entry extraction",t.fileName,{cancelled:this.canceled});return}this.opts.onEntry&&this.opts.onEntry(t,this.zipfile);let r=k.join(this.opts.dir,t.fileName),n=t.externalFileAttributes>>16&65535,i=61440,o=16384,s=40960,c=(n&i)===s,u=(n&i)===o;!u&&t.fileName.endsWith("/")&&(u=!0);let d=t.versionMadeBy>>8;u||(u=d===0&&t.externalFileAttributes===16),q("extracting entry",{filename:t.fileName,isDir:u,isSymlink:c});let a=this.getExtractedMode(n,u)&511,f=u?r:k.dirname(r),l={recursive:!0};if(u&&(l.mode=a),q("mkdir",B({dir:f},l)),await re.mkdir(f,l),u)return;q("opening read stream",r);let g=await ot(this.zipfile.openReadStream.bind(this.zipfile))(t);if(c){let y=await kn(g);q("creating symlink",y,r),await re.symlink(y,r)}else await Kn(g,Vn(r,{mode:a}))}getExtractedMode(t,r){let n=t;return n===0&&(r?(this.opts.defaultDirMode&&(n=parseInt(this.opts.defaultDirMode,10)),n||(n=493)):(this.opts.defaultFileMode&&(n=parseInt(this.opts.defaultFileMode,10)),n||(n=420))),n}};gr.exports=async function(e,t){if(q("creating target directory",t.dir),!k.isAbsolute(t.dir))throw new Error("Target directory is expected to be absolute");return await re.mkdir(t.dir,{recursive:!0}),t.dir=await re.realpath(t.dir),new it(e,t).extract()}});var vr=v((ki,yr)=>{var le;yr.exports=function(){if(!le){try{le=ke()("follow-redirects")}catch{}typeof le!="function"&&(le=function(){})}le.apply(null,arguments)}});var Rr=v((Gi,ft)=>{var G=require("url"),st=G.URL,Zn=require("http"),Xn=require("https"),Cr=require("stream").Writable,Qn=require("assert"),Er=vr(),ct=["abort","aborted","connect","error","socket","timeout"],ut=Object.create(null);ct.forEach(function(e){ut[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}});var wr=je("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),ei=je("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),ti=je("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),ri=je("ERR_STREAM_WRITE_AFTER_END","write after end");function L(e,t){Cr.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}L.prototype=Object.create(Cr.prototype);L.prototype.abort=function(){_r(this._currentRequest),this.emit("abort")};L.prototype.write=function(e,t,r){if(this._ending)throw new ri;if(!(typeof e=="string"||typeof e=="object"&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof t=="function"&&(r=t,t=null),e.length===0){r&&r();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new ti),this.abort())};L.prototype.end=function(e,t,r){if(typeof e=="function"?(r=e,e=t=null):typeof t=="function"&&(r=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(e,t,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};L.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};L.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};L.prototype.setTimeout=function(e,t){var r=this;function n(s){s.setTimeout(e),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},e),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",o),r.removeListener("error",o),r.removeListener("response",o),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",i)}return t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){L.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(L.prototype,e,{get:function(){return this._currentRequest[e]}})});L.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};L.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t){this.emit("error",new TypeError("Unsupported protocol "+e));return}if(this._options.agents){var r=e.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of ct)n.on(i,ut[i]);if(this._currentUrl=/^\//.test(this._options.path)?G.format(this._options):this._currentUrl=this._options.path,this._isRedirect){var o=0,s=this,c=this._requestBodyBuffers;(function u(d){if(n===s._currentRequest)if(d)s.emit("error",d);else if(o<c.length){var a=c[o++];n.finished||n.write(a.data,a.encoding,u)}else s._ended&&n.end()})()}};L.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(!r||this._options.followRedirects===!1||t<300||t>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(_r(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new ei);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var o=this._options.method;((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],at(/^content-/i,this._options.headers));var s=at(/^host$/i,this._options.headers),c=G.parse(this._currentUrl),u=s||c.host,d=/^\w+:/.test(r)?this._currentUrl:G.format(Object.assign(c,{host:u})),a;try{a=G.resolve(d,r)}catch(y){this.emit("error",new wr(y));return}Er("redirecting to",a),this._isRedirect=!0;var f=G.parse(a);if(Object.assign(this._options,f),(f.protocol!==c.protocol&&f.protocol!=="https:"||f.host!==u&&!ii(f.host,u))&&at(/^(?:authorization|cookie)$/i,this._options.headers),typeof i=="function"){var l={headers:e.headers,statusCode:t},g={url:d,method:o,headers:n};try{i(this._options,l,g)}catch(y){this.emit("error",y);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(y){this.emit("error",new wr(y))}};function Fr(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach(function(n){var i=n+":",o=r[i]=e[n],s=t[n]=Object.create(o);function c(d,a,f){if(typeof d=="string"){var l=d;try{d=br(new st(l))}catch{d=G.parse(l)}}else st&&d instanceof st?d=br(d):(f=a,a=d,d={protocol:i});return typeof a=="function"&&(f=a,a=null),a=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},d,a),a.nativeProtocols=r,Qn.equal(a.protocol,i,"protocol mismatch"),Er("options",a),new L(a,f)}function u(d,a,f){var l=s.request(d,a,f);return l.end(),l}Object.defineProperties(s,{request:{value:c,configurable:!0,enumerable:!0,writable:!0},get:{value:u,configurable:!0,enumerable:!0,writable:!0}})}),t}function ni(){}function br(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return e.port!==""&&(t.port=Number(e.port)),t}function at(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return r===null||typeof r>"u"?void 0:String(r).trim()}function je(e,t){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=t+": "+n.message,this.cause=n):this.message=t}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r.prototype.code=e,r}function _r(e){for(var t of ct)e.removeListener(t,ut[t]);e.on("error",ni),e.abort()}function ii(e,t){let r=e.length-t.length-1;return r>0&&e[r]==="."&&e.endsWith(t)}ft.exports=Fr({http:Zn,https:Xn});ft.exports.wrap=Fr});var gi={};yt(gi,{activate:()=>hi});module.exports=Ur(gi);var Y=require("coc.nvim");var Ct=require("coc.nvim"),Ne=N(require("path"));var wt=require("coc.nvim"),pe=[{scheme:"file",language:"clojure"},{scheme:"jar",language:"clojure"},{scheme:"zipfile",language:"clojure"}];function _(){var c,u;let e=wt.workspace.getConfiguration("clojure"),t=e.inspect("keymaps"),r=e.inspect("executable"),n=e.inspect("enable"),i=e.inspect("initializationOptions"),o=e.inspect("lsp-version"),s=e.inspect("startupMessage");return{keymaps:{enable:e.get("keymaps.enable",(c=t.defaultValue)==null?void 0:c.enable),shortcut:e.get("keymaps.shortcut",(u=t.defaultValue)==null?void 0:u.shortcut)},enable:e.get("enable",n.defaultValue),executable:e.get("executable",r.defaultValue),executableArgs:e.get("executable-args")||e.get("executableArgs")||[],initializationOptions:e.get("initialization-options",i.defaultValue),lspVersion:e.get("lsp-version",o.defaultValue),lspInstallPath:e.get("lsp-install-path"),startupMessage:e.get("startup-message",s.defaultValue)}}var h;function bt(e){h=e.logger}function Et(e){h.info("Creating client");let t=Ne.default.extname(e)===".jar"?{command:Ne.default.join(process.env.JAVA_HOME,"bin","java"),args:["-jar",e]}:{command:e,args:_().executableArgs};h.debug("ServerOptions",t);let r={run:t,debug:t},n={disabledFeatures:["signatureHelp"],documentSelector:pe,initializationOptions:_().initializationOptions};return new Ct.LanguageClient("clojure","Clojure Language Client",r,n)}var w=require("coc.nvim");var Te={};yt(Te,{commands:()=>_t,default:()=>Dr});var _t=[{command:"add-import-to-namespace",description:"Add specific require form to current namespace declaration",prompt:"Library name?",shortcut:"ai"},{command:"add-missing-import",description:"Add Java import for symbol under cursor to current namespace declaration"},{command:"add-missing-libspec",description:"Add require form for symbol under cursor to current namespace declaration",shortcut:"am"},{command:"add-require-suggestion",description:"Add suggested require to ns form",shortcut:"as"},{aliases:["change-coll"],choices:["list","vector","map","set"],command:"change-collection",description:"Choose new type of collection",prompt:"New coll type"},{command:"clean-ns",description:"Sort and remove unused required libraries in namespace declaration",shortcut:"cn"},{command:"create-function",description:"Create a function from the current form",shortcut:"fe"},{command:"create-test",description:"Creates a test somewhere, who knows",shortcut:"ct"},{command:"cursor-info",description:"Show debugging information for the symbol at cursor"},{command:"cycle-coll",description:"Cycle the kind of collection: list -> map -> vector -> set -> list",shortcut:"cc"},{command:"cycle-privacy",description:"Cycle the privacy of current function definition",shortcut:"cp"},{command:"demote-fn",description:"Demote fn to #()",shortcut:"dm"},{command:"docs",description:"Read the docs for a given symbol (in given namespace)"},{aliases:["move-coll-entry-up"],command:"drag-backward",description:"Move coll entry backwards in collection (will move map entries)",shortcut:"db"},{aliases:["move-coll-entry-down"],command:"drag-forward",description:"Move coll entry forwards in collection (will move map entries)",shortcut:"df"},{command:"expand-let",description:"Move current let form up a level",shortcut:"el"},{command:"extract-function",description:"Move current form into new top-level function",prompt:"Function name?",shortcut:"ef"},{command:"inline-symbol",description:"Replace all instances of symbol with symbol definition",shortcut:"is"},{command:"introduce-let",description:"Move current form to let-bound variable",prompt:"Bind to?",shortcut:"il"},{command:"move-coll-entry-down",description:"Move the current element (or pair) down within the collection"},{command:"move-coll-entry-up",description:"Move the current element (or pair) up within the collection"},{command:"move-form",description:"Move form under cursor to specified file",prompt:"Which file?",shortcut:"mf"},{command:"move-to-let",description:"Move current form into surrounding let block",prompt:"Bind to?",shortcut:"ml"},{command:"promote-fn",description:"Promote #() to fn, or fn to defn",shortcut:"pf"},{command:"resolve-macro-as",description:"Add entry to .clj-kondo/config.edn to resolve macro as another macro",shortcut:"ma"},{command:"server-info",description:"Show server configuration information"},{command:"sort-map",description:"Sort entries within current map",shortcut:"sm"},{command:"suppress-diagnostic",description:"Add a :clj-kondo/ignore to suppress linting current line",prompt:"Lint to ignore?"},{command:"thread-first",description:"Replace current form with thread-first expession",shortcut:"th"},{command:"thread-first-all",description:"Replace current and all nested forms with thread-first form",shortcut:"tf"},{command:"thread-last",description:"Replace current form with thread-last expession",shortcut:"tt"},{command:"thread-last-all",description:"Replace current and all nested forms with thread-last form",shortcut:"tl"},{command:"unwind-all",description:"Replace entire current threaded form with nested form",shortcut:"ua"},{command:"unwind-thread",description:"Replace first two forms in current threaded form with nested form",shortcut:"uw"}],Dr={commands:_t};async function Ue(e,t=""){return e?(await w.window.requestInput(e,t)).trim():void 0}async function $r(e){let t=await Ue("Var name?"),r=await Ue("Namespace?","clojure.core");if(t&&r){let n=await e.sendRequest("clojure/clojuredocs/raw",{symName:t,symNs:r}).catch(i=>{w.window.showErrorMessage(i)});n&&await w.window.showDialog({title:`${n.ns}/${n.name}`,content:n.doc})}}async function St(){let{line:e,character:t}=await w.window.getCursorPosition();return[(await w.workspace.document).uri,e,t]}var Hr=[{command:"docs",fn:$r},{command:"cursor-info",fn:async e=>{let[t,r,n]=await St();return e.sendRequest("clojure/cursorInfo/log",{textDocument:{uri:t},position:{line:r,character:n}}).catch(i=>{w.window.showErrorMessage(i)})}},{command:"server-info",fn:async e=>e.sendRequest("clojure/serverInfo/log").catch(t=>{w.window.showErrorMessage(t)})}],Rt=(()=>{let{commands:e}=Te,t=new Map;return e.concat(Hr).forEach(r=>{let n=r.command;t.has(n)||t.set(n,{command:n});for(let[i,o]of Object.entries(r)){let s=t.get(n);s&&!s[i]&&(s[i]=o)}}),[...t.values()]})();async function De(e,{command:t},r=[]){let n=await St();return e.sendRequest("workspace/executeCommand",{command:t,arguments:n.concat(r)}).catch(i=>{w.window.showErrorMessage(i)})}async function Wr(e,t){if(!e||!t)return;let r=await w.window.showMenuPicker(t,{title:e});if(r!==-1)return t[r]}async function Vr(e,t){let{title:r,choices:n}=t,i=await Wr(r,n),o=[];return i&&o.push(i),De(e,t,o)}async function kr(e,t){let{title:r}=t,n=await Ue(r);if(n)return De(e,t,[n])}function Gr(e,t,r){let{command:n,fn:i,title:o,choices:s,aliases:c}=r,u=`lsp-clojure-${n}`,d=async()=>{if(s&&!w.workspace.env.dialog){h.info(`Workspace doesn't allow dialogs, cancelling command ${u}`);return}else{if(i)return h.debug(`Executing 'fn' command ${u}`),i(t);s?(h.debug(`Executing 'choices' command ${u}`),await Vr(t,r)):o?(h.debug(`Executing 'prompt' command ${u}`),await kr(t,r)):(h.debug(`Executing 'position' command ${u}`),await De(t,r))}};h.debug(`Registering command ${u}`),e.subscriptions.push(w.commands.registerCommand(u,d)),c&&c.forEach(a=>{let f=`lsp-clojure-${a}`;h.debug(`Registering command ${f} as alias of ${u}`),e.subscriptions.push(w.commands.registerCommand(f,d))})}function Yr(e,t){let{command:r,shortcut:n}=t,i=`lsp-clojure-${r}`,{keymaps:o}=_(),s=`${o.shortcut}${n}`;try{h.debug(`Creating keymap '${s}' for command '${i}'`),w.workspace.nvim.command(`nnoremap <silent> ${s} :call CocActionAsync('runCommand', '${i}')<CR>`,!0),e.subscriptions.push(w.Disposable.create(()=>{w.workspace.nvim.command(`nunmap ${s}`,!0)}))}catch(c){h.error(`Can't create keymapping ${s} for command ${r}`,c)}}function Lt(e,t){for(let r of Rt)Gr(e,t,r);if(_().keymaps.enable)for(let r of Rt.filter(n=>n.shortcut))Yr(e,r)}var mt=require("coc.nvim"),Or=N(xr()),pt=N(Rr()),R=N(require("fs")),Me=require("os"),H=N(require("path")),Ir=require("url");var Sr=N(require("fs")),me=N(require("path")),ne=N(require("process"));var oi="clojure-lsp-version",si={darwin:{x64:"clojure-lsp-native-macos-amd64.zip"},linux:{x64:"clojure-lsp-native-static-linux-amd64.zip",arm64:"clojure-lsp-native-linux-aarch64.zip"},win32:{x64:"clojure-lsp-native-windows-amd64.zip"}};function dt(e=ne.platform,t=ne.arch){var r;return((r=si[e])==null?void 0:r[t])??"clojure-lsp-standalone.jar"}function Ae(e,t=ne.platform,r=ne.arch){let n=dt(t,r);return me.extname(n).toLowerCase()!==".jar"&&(n=r==="win32"?"clojure-lsp.exe":"clojure-lsp"),me.join(e,n)}function lt(e){return me.join(e,oi)}function Lr(e){let t=lt(e);try{return Sr.readFileSync(t,"utf8")}catch(r){return h.error("Could not read clojure-lsp version file.",r.message),""}}async function ai(e){let t=new Ir.URL(e);return new Promise((r,n)=>{pt.https.get({host:t.hostname,path:t.pathname,port:t.port,headers:{"user-agent":"node.js"}},i=>{let o="";i.on("data",s=>{o+=s}),i.on("end",()=>{r(o)})}).on("error",i=>{h.error(`Error downloading file from ${t}: ${i.message}`),n(i)})})}async function ci(){try{let e=await ai("https://api.github.com/repos/clojure-lsp/clojure-lsp/releases");return JSON.parse(e)[0].tag_name}catch(e){return h.error("Error while finding latest clojure-lsp version.",e.message),""}}function ui(e){let t=H.default.join(H.default.dirname(e),"backup"),r=H.default.join(t,H.default.basename(e));try{R.default.existsSync(t)||R.default.mkdirSync(t),h.info("Backing up existing clojure-lsp to",r),R.default.renameSync(e,r)}catch(n){h.error("Error while backing up existing clojure-lsp file.",n.message)}return r}function fi(e,t){h.info("Downloading clojure-lsp from",e);let r=mt.window.createStatusBarItem(0,{progress:!0});return r.show(),new Promise((n,i)=>{pt.https.get(e,o=>{if(o.statusCode===200){let s=R.default.createWriteStream(t),c=0,u=Number(o.headers["content-length"]);o.on("data",d=>{c+=d.length;let a=(c/u*100).toFixed(2);r.text=`${a}% Downloading clojure-lsp`}).on("end",()=>{s.close(),r.hide(),h.info("Clojure-lsp artifact downloaded to",t),n()}).pipe(s)}else o.resume(),r.hide(),i(new Error(o.statusMessage))}).on("error",(...o)=>(r.hide(),i(...o)))})}function di(e,t){h.info("Writing version file");let r=lt(e);try{R.default.writeFileSync(r,t)}catch(n){h.error("Could not write clojure-lsp version file.",n.message)}}async function li(e,t){return h.info("Unzipping file"),(0,Or.default)(e,{dir:t})}async function mi(e,t){let r=dt(),n=t!=="nightly"?`https://github.com/clojure-lsp/clojure-lsp/releases/download/${t}/${r}`:`https://nightly.link/clojure-lsp/clojure-lsp/workflows/nightly/master/${r}`,i=H.default.join(e,r),o=Ae(e),s=R.default.existsSync(o)?ui(o):o;try{await fi(n,i),H.default.extname(i)===".zip"&&await li(i,e),H.default.extname(o)===""&&R.default.chmodSync(o,509),di(e,t)}catch(c){return h.error("Error downloading clojure-lsp.",c.message),s}return o}function pi(e){{let{executable:t}=_();if(t.startsWith("~/")&&(t=t.replace("~",(0,Me.homedir)())),(0,R.existsSync)(t))return t}{let{lspInstallPath:t}=_(),r;if(t?(t.startsWith("~/")&&(t=t.replace("~",(0,Me.homedir)())),r=Ae(t)):r=Ae(e),(0,R.existsSync)(r))return r}}async function qr(e){let t=e.storagePath;(0,R.existsSync)(t)||(0,R.mkdirSync)(t);let r=pi(t);if(r)return r;if(await mt.window.showQuickpick(["Yes","No"],"clojure-lsp is not found. Download from Github?")===0){let i=Lr(t),{lspVersion:o,lspInstallPath:s}=_(),c=["","latest"].includes(o)?await ci():o;if(i!==c&&c!==""||c==="nightly"){let u=s||t;u.startsWith("~/")&&(u=u.replace("~",(0,Me.homedir)())),r=await mi(u,c),h.info(`Successfully downloaded clojure-lsp to ${r}`)}}return r}var Pe=class{constructor(t){this.client=t}async provideSignatureHelp(t,r,n,i){return this.client.sendRequest("textDocument/signatureHelp",{textDocument:{uri:t.uri},position:r,context:i},n).catch(o=>this.client.handleFailedRequest({method:"textDocument/signatureHelp"},n,o,null))}};async function hi(e){if(bt(e),h.info("Starting up coc-clojure"),!_().enable)return;let t=null;_().startupMessage&&(t=Y.window.createStatusBarItem(void 0,{progress:!0}),t.text="Loading clojure-lsp",t.show());let r=await qr(e);if(!r){h.error("No clojure-lsp installed"),t==null||t.dispose();return}let n=Et(r);e.subscriptions.push(Y.services.registLanguageClient(n)),e.subscriptions.push(Y.languages.registerSignatureHelpProvider(pe,new Pe(n),["("," "])),Lt(e,n),await n.onReady(),_().startupMessage&&(t==null||t.dispose(),Y.window.showInformationMessage("clojure-lsp loaded!"))}0&&(module.exports={activate});
